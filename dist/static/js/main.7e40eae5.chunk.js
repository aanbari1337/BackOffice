(this.webpackJsonpback_office=this.webpackJsonpback_office||[]).push([[0],{106:function(e,t,a){e.exports={content:"Tags_content__2bV0M",listTag:"Tags_listTag__3GzvY",btnPrimary:"Tags_btnPrimary__AJJxG",inpGrp:"Tags_inpGrp__1tQ8v"}},17:function(e,t,a){e.exports={content:"Auth_content__1ts8S",formIn:"Auth_formIn__2scnR",formUp:"Auth_formUp__1fIX6",illustration:"Auth_illustration__3bqUP",formControl:"Auth_formControl__3_p4B",btnPrimary:"Auth_btnPrimary__2MXqj",error:"Auth_error___ehqt"}},21:function(e,t,a){e.exports={"navigation-clean-button":"NavBar_navigation-clean-button__1NT-Z",navbarBrand:"NavBar_navbarBrand__18xaf",actions:"NavBar_actions__3cM_G",login:"NavBar_login__3SjXV",txt:"NavBar_txt__2TnRy","action-button":"NavBar_action-button__z-yBG"}},250:function(e,t,a){e.exports={content:"CreateCours_content__186iO"}},253:function(e,t,a){e.exports=a(463)},463:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),c=a.n(o),l=a(11),i=a(12),s=a(14),u=a(13),m=a(19),d=a(7),p=a(5),f=a(21),h=a.n(f),b=Object(p.b)(null,(function(e){return{signOut:function(){return e((function(e,t,a){(0,a.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){return r.a.createElement("span",{className:"navbar-text ".concat(h.a.actions," ").concat(h.a.txt)},r.a.createElement(m.c,{to:"/listcours",className:h.a.login},"Mes cours"),r.a.createElement(m.c,{to:"/satistiques",className:h.a.login},"Statistiques"),r.a.createElement(m.c,{to:"/tags",className:h.a.login},"Tags"),r.a.createElement("a",{href:"/",onClick:e.signOut,className:"btn btn-light ".concat(h.a["action-button"])},"Log Out"))})),g=function(){return r.a.createElement("span",{className:"navbar-text ".concat(h.a.actions," ").concat(h.a.txt)},r.a.createElement(m.c,{to:"/signin",className:h.a.login},"Login"),r.a.createElement(m.c,{to:"/signup",className:"btn btn-light ".concat(h.a["action-button"])},"Sign up"))},E=Object(p.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.auth.uid?r.a.createElement(b,null):r.a.createElement(g,null);return r.a.createElement("nav",{className:"navbar navbar-light navbar-expand-md ".concat(h.a["navigation-clean-button"])},r.a.createElement(m.b,{to:"/",className:"navbar-brand ".concat(h.a.navbarBrand)},"Home"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMenu","aria-controls":"navbarMenu","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarMenu"},t))})),v=a(26),O=a(73),C=a(1),j=a(9),y=a(244),N=a.n(y),w=a(245),_=a.n(w),k=a(465),x=a(10),S=a.n(x),P=a(27);function D(e,t){return new Promise((function(a){t.collection("cours").where("nomCours","==",e).limit(1).get().then((function(e){e.forEach((function(e){a(e.id)}))}))}))}var A=a(15),R=a(71),T=a.n(R),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={titre:"",contenu:"",volumeHoraire:"",niveau:"1",tags:[],idOnglet:e.props.id},e.selectTag=function(t){var a=e.state.tags,n=t.target.checked,r=t.target.value,o=t.target.id;if(n)e.setState(Object(C.a)(Object(C.a)({},e.state),{},{tags:[].concat(Object(O.a)(e.state.tags),[{libelle:r,id:o}])}));else{var c=a.findIndex((function(e){return e.libelle===r}));c>-1&&(a.splice(c,1),e.setState(Object(C.a)(Object(C.a)({},e.state),{},{tags:a})))}},e.handleChange=function(t){e.setState(Object(v.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.contenu||""===e.state.titre||""===e.state.volumeHoraire)return alert("please fill out all the fields !!"),null;e.props.CreateChap(e.state,e.props.nomCours),e.props.showPdf(e.state.contenu,e.state.titre)},e.generateCheckBox=function(t){var a=t.tags,n=t.auth,o=[];return a&&a.forEach((function(t){n.uid===t.idProf&&o.push(r.a.createElement("span",{key:t.id,className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",id:t.id,name:t.libelle,value:t.libelle,type:"checkbox",onChange:e.selectTag}),r.a.createElement("label",{className:"form-check-label",htmlFor:t.id},t.libelle)))})),o},e}return Object(i.a)(a,[{key:"option",value:function(){for(var e=[],t=0;t<5;t++)e.push(r.a.createElement("option",{key:t+1,value:t+1},t+1));return e}},{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{dialogClassName:T.a["modal-90w"],show:this.props.show,backdrop:"static",onHide:this.props.closeModal},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{className:"text-center"},"Cr\xe9er votre chapitre ici")),r.a.createElement(k.a.Body,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-group col-md-4"},r.a.createElement("div",{class:"input-group-prepend"},r.a.createElement("span",{class:"input-group-text"},"Titre du chapitre")),r.a.createElement("input",{className:"form-control",type:"text",id:"titre",placeholder:"titre du chapitre",required:!0,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group col-md-4"},r.a.createElement("div",{class:"input-group-prepend"},r.a.createElement("span",{class:"input-group-text"},"Volume horaire")),r.a.createElement("input",{type:"number",min:"0",className:"form-control",id:"volumeHoraire",placeholder:"volume horaire",required:!0,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group col-md-4"},r.a.createElement("div",{class:"input-group-prepend"},r.a.createElement("span",{class:"input-group-text"},"Niveau")),r.a.createElement("select",{className:"form-control",value:this.state.niveau,id:"niveau",placeholder:"niveau",onChange:this.handleChange},this.option())),r.a.createElement("div",{className:"form-group row ".concat(T.a.tgs)},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"choisir tag :"),this.generateCheckBox(this.props))),r.a.createElement("div",null,r.a.createElement(N.a,{editor:_.a,data:"",onInit:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},onChange:function(t,a){var n=a.getData();e.setState(Object(C.a)(Object(C.a)({},e.state),{},{contenu:n}))}})))),r.a.createElement(k.a.Footer,null,r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",onClick:this.handleSubmit},"Cr\xe9er")))}}]),a}(n.Component),M=Object(j.d)(Object(p.b)((function(e){return{tags:e.firestore.ordered.tags,auth:e.firebase.auth}}),(function(e){return{CreateChap:function(t,a){return e(function(e,t){return function(){var a=Object(P.a)(S.a.mark((function a(n,r,o){var c,l,i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o.getFirebase,l=c().firestore(),a.next=4,D(t,l);case 4:i=a.sent,l.collection("chapitre").add(Object(C.a)(Object(C.a)({},e),{},{idCours:i})).then((function(){n({type:"ADD_CHAP",chap:e})})).catch((function(e){n({type:"ERROR",err:e})}));case 6:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()}(t,a))}}})),Object(A.firestoreConnect)([{collection:"tags"}]))(I);function F(e,t){return new Promise((function(a){t.collection("cours").where("nomCours","==",e).limit(1).get().then((function(e){e.forEach((function(e){a(e.id)}))}))}))}function U(e,t,a){return new Promise((function(n){var r=e().firestore.ordered.onglet;0!==r.length&&r.filter((function(e){return e.idCours===t})).forEach((function(e){e.nomOnglet===a&&n(!0)}));n(!1)}))}var B=function(e){console.log(e.titre),console.log(e.contentChap);var t=e.contentChap.findIndex((function(t){return t.titre===e.titre})),a=e.contentChap[t].content;return r.a.createElement(k.a,{dialogClassName:T.a["modal-90w"],show:e.show,backdrop:"static",onHide:e.close},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{className:"text-center"},e.titre)),r.a.createElement(k.a.Body,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}})))},L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={idOnglet:"",nomOnglet:"",contentChap:[],titre:"",addOnglet:!1,showModal:!1,showPDF:!1,chapitre:[]},e.handleChange=function(t){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{idOnglet:e.props.id,nomOnglet:t.target.value}))},e.showModalPdf=function(t){t.preventDefault(),t.target.id&&e.setState(Object(C.a)(Object(C.a)({},e.state),{},{showPDF:!0,titre:t.target.id}))},e.showModal=function(t){t.preventDefault(),e.setState(Object(C.a)(Object(C.a)({},e.state),{},{showModal:!0}))},e.closeModalPdf=function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{showPDF:!1}))},e.closeModal=function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{showModal:!1}))},e.showPdf=function(t,a){var n=r.a.createElement("button",{type:"button",className:"btn btn-link",key:a,id:a,onClick:e.showModalPdf},r.a.createElement("i",{id:a,className:"far fa-file-pdf fa-2x"}));e.setState(Object(C.a)(Object(C.a)({},e.state),{},{contentChap:[].concat(Object(O.a)(e.state.contentChap),[{content:t,titre:a}]),chapitre:[].concat(Object(O.a)(e.state.chapitre),[n]),showModal:!1})),console.log(e.state.chapitre)},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.nomOnglet)return alert("champ vide !"),null;e.setState(Object(C.a)(Object(C.a)({},e.state),{},{addOnglet:!0})),e.props.CreateOnglet(e.state,e.props.nomCours),document.getElementById("Onglet"+e.props.id).remove()},e}return Object(i.a)(a,[{key:"render",value:function(){var e="Onglet"+this.props.id;return r.a.createElement("div",{key:this.props.id,className:"card border-secondary mb-3"},r.a.createElement("h5",{className:"card-header"},"Onglet ",this.props.id),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nomOnglet"},"Nom d'onglet"),r.a.createElement("input",{type:"text",className:"form-control",id:"nomOnglet",placeholder:"nom onlget",required:!0,onChange:this.handleChange})),r.a.createElement("div",null,this.state.chapitre),r.a.createElement("br",null),r.a.createElement("button",{id:e,type:"submit",className:"btn btn-outline-primary",onClick:this.handleSubmit},"Ajouter Onglet"),this.state.addOnglet?r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary float-right",onClick:this.showModal},"Ajouter Chapitre"):null)),this.state.showModal?r.a.createElement(M,{closeModal:this.closeModal,showPdf:this.showPdf,show:this.state.showModal,id:this.props.id,key:this.props.id,nomCours:this.props.nomCours}):null,this.state.showPDF?r.a.createElement(B,{show:this.state.showPDF,close:this.closeModalPdf,contentChap:this.state.contentChap,titre:this.state.titre}):null)}}]),a}(n.Component),G=Object(j.d)(Object(A.firestoreConnect)([{collection:"onglet"}]),Object(p.b)((function(e){return{onglet:e.firestore.ordered.onglet,exist:e.onglet.exist}}),(function(e){return{CreateOnglet:function(t,a){return e(function(e,t){return function(){var a=Object(P.a)(S.a.mark((function a(n,r,o){var c,l,i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o.getFirebase,l=c().firestore(),a.next=4,F(t,l);case 4:return i=a.sent,a.next=7,U(r,i,e.nomOnglet);case 7:a.sent?alert('already exist ! type another name and click "Ajouter Onglet"'):l.collection("onglet").add(Object(C.a)(Object(C.a)({},e),{},{idCours:i})).then((function(){n({type:"ADD_ONGLET",onglet:e})})).catch((function(e){n({type:"ERROR",err:e})}));case 9:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()}(t,a))}}})))(L);function q(e,t){return new Promise((function(a){t.collection("chapitre").where("idCours","==",e).get().then((function(e){e.forEach((function(e){e.ref.delete()})),a(!0)})),a(!0)}))}function H(e,t){return new Promise((function(a){t.collection("onglet").where("idCours","==",e).get().then((function(e){e.forEach((function(e){e.ref.delete()})),a(!0)})),a(!0)}))}var X=function(e){return function(){var t=Object(P.a)(S.a.mark((function t(a,n,r){var o,c,l,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=o().firestore(),t.next=4,q(e.id,c);case 4:return l=t.sent,t.next=7,H(e.id,c);case 7:i=t.sent,l&&i&&c.collection("cours").doc(e.id).delete().then((function(){a({type:"DELETE_COURS",cours:e})})).catch((function(e){a({type:"ERROR",err:e})}));case 9:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()};function J(e,t,a){return new Promise((function(n){console.log(e);var r=e&&e.filter((function(e){return e.idProf===t}));0!==r.length&&r.forEach((function(e){e.nomCours===a&&n(!0)})),n(!1)}))}var W=a(250),z=a.n(W),V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={nomCours:"",nbrOnglet:"",buttonClicked:!1},e.handleChange=function(t){e.setState(Object(v.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.CreateCours(e.state,e.props.cours),e.setState({buttonClicked:!0})},e.showOnglets=function(t){document.getElementById("buttonClicked").disabled=!0;for(var a=[],n=1;n<=t;n++)a.push(r.a.createElement(G,{key:n,nomCours:e.state.nomCours,id:n}));return a},e}return Object(i.a)(a,[{key:"render",value:function(){if(!this.props.auth.uid)return r.a.createElement(d.a,{to:"/signin"});var e=this.props.coursExist;return r.a.createElement("div",{className:"container ".concat(z.a.content)},r.a.createElement("div",{className:"card"},r.a.createElement("h3",{className:"text-center card-header"},"Cr\xe9er un nouveau cours"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nomCours"},"Nom du cours"),r.a.createElement("input",{type:"text",className:"form-control",id:"nomCours",placeholder:"intitul\xe9 du cours",required:!0,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nbrOnglet"},"Nombre d'onglet"),r.a.createElement("input",{type:"number",min:"0",className:"form-control",id:"nbrOnglet",placeholder:"nombre d'onglet",required:!0,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",id:"buttonClicked"},"Cr\xe9er")),r.a.createElement("div",{className:"text-center text-danger"},this.state.buttonClicked&&null!==e?r.a.createElement("p",null,e):null))),null===e&&this.state.buttonClicked?this.showOnglets(this.state.nbrOnglet):null)}}]),a}(n.Component),K=Object(j.d)(Object(A.firestoreConnect)([{collection:"cours"}]),Object(p.b)((function(e){return{auth:e.firebase.auth,cours:e.firestore.ordered.cours,coursExist:e.cours.exist}}),(function(e){return{CreateCours:function(t,a){return e(function(e,t){return function(){var a=Object(P.a)(S.a.mark((function a(n,r,o){var c,l,i,s;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o.getFirebase,l=r().firebase.auth.uid,a.next=4,J(t,l,e.nomCours);case 4:i=a.sent,s=c().firestore(),i?n({type:"EXIST",msg:"cours already exist"}):s.collection("cours").add(Object(C.a)(Object(C.a)({},e),{},{idProf:l,date:new Date})).then((function(){n({type:"ADD_COURS",cours:e})})).catch((function(e){n({type:"Error",err:e})}));case 7:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()}(t,a))}}})))(V);function Q(e,t,a){return new Promise((function(n){var r=e().firestore.ordered.tags;0!==r.length&&r.filter((function(e){return e.idProf===t})).forEach((function(e){e.libelle===a&&n(!0)}));n(!1)}))}var Z=a(106),Y=a.n(Z),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){"cours"===e.props.type&&(console.log("cours supp"),e.props.deleteCours(e.props.cours)),"tag"===e.props.type&&e.props.deleteTag(e.props.tag),e.props.closeModal()},e}return Object(i.a)(a,[{key:"render",value:function(){return console.log(this.props),r.a.createElement(k.a,{show:this.props.show,onHide:this.props.closeModal},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,r.a.createElement("h4",null,"Are you sure ?"))),r.a.createElement(k.a.Body,null,r.a.createElement("p",null,"Do you really want to delete this ",this.props.type," ?")),r.a.createElement(k.a.Footer,null,r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.props.closeModal},"Cancel"),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleClick},"Delete")))}}]),a}(n.Component),ee=Object(p.b)(null,(function(e){return{deleteCours:function(t){return e(X(t))},deleteTag:function(t){return e(function(e){return function(){var t=Object(P.a)(S.a.mark((function t(a,n,r){var o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r.getFirebase,o().firestore().collection("tags").doc(e.id).delete().then((function(){a({type:"DELETE_TAG",tag:e})})).catch((function(e){a({type:"ERROR",err:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}}}))($),te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={libelle:"",tag:"",remove:!1},e.handleChange=function(t){e.setState(Object(v.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){e.state.libelle.length&&(t.preventDefault(),e.props.AddTag(e.state),e.setState({libelle:""}))},e.getTags=function(t){var a=t.tags,n=t.auth,o=[];return a&&a.forEach((function(t){t.idProf===n.uid&&o.push(r.a.createElement("li",{key:t.id,id:t.id,className:"list-group-item  d-flex justify-content-between"},r.a.createElement("span",null,t.libelle),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{tag:t,remove:!0}))}},r.a.createElement("i",{class:"far fa-trash-alt"}))))})),o},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.auth.uid?r.a.createElement("div",{className:Y.a.content},r.a.createElement("div",{className:Y.a.listTag},r.a.createElement("h3",{className:"text-center"},"Liste des tags"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group ".concat(Y.a.inpGrp)},r.a.createElement("input",{onChange:this.handleChange,value:this.state.libelle,className:"form-control",id:"libelle",type:"text",placeholder:"nouveau tag",required:!0}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-info btn-sm",type:"submit"},r.a.createElement("strong",null,"Ajouter"))))),r.a.createElement("ul",{className:"list-group list-group-flush"},this.getTags(this.props))),this.state.remove?r.a.createElement(ee,{show:this.state.remove,closeModal:function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{remove:!1}))},type:"tag",tag:this.state.tag}):null):r.a.createElement(d.a,{to:"/signin"})}}]),a}(n.Component),ae=Object(j.d)(Object(A.firestoreConnect)([{collection:"tags"}]),Object(p.b)((function(e){return{tags:e.firestore.ordered.tags,auth:e.firebase.auth}}),(function(e){return{AddTag:function(t){return e(function(e){return function(){var t=Object(P.a)(S.a.mark((function t(a,n,r){var o,c,l;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=n().firebase.auth.uid,l=o().firestore(),t.next=5,Q(n,c,e.libelle);case 5:t.sent?alert("already exist !"):l.collection("tags").add({libelle:e.libelle,idProf:c}).then((function(){a({type:"ADD_TAG",tag:e})})).catch((function(e){a({type:"ERROR",err:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}}})))(te),ne=a(17),re=a.n(ne),oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",loginClicked:!1},e.handleChange=function(t){e.setState(Object(v.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.setState(Object(C.a)(Object(C.a)({},e.state),{},{loginClicked:!0})),e.props.signIn(e.state)},e}return Object(i.a)(a,[{key:"disappearMsg",value:function(e){var t=e;return e=null,r.a.createElement("p",null,t)}},{key:"render",value:function(){var e=this.props,t=e.signinError;return e.auth.uid?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:re.a.content},r.a.createElement("form",{className:re.a.formIn,onSubmit:this.handleSubmit},r.a.createElement("div",{className:re.a.illustration},r.a.createElement("i",{className:"fas fa-user-lock"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control ".concat(re.a.formControl),id:"email","aria-describedby":"email",placeholder:"Email",required:!0,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control ".concat(re.a.formControl),id:"password",placeholder:"Password",required:!0,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block ".concat(re.a.btnPrimary)},"Log In"),r.a.createElement("div",{className:re.a.error},this.state.loginClicked&&t?r.a.createElement("p",null,t):null)))}}]),a}(n.Component),ce=Object(p.b)((function(e){return{signinError:e.auth.signinError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var a}}}))(oe),le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fullName:"",email:"",password:"",verifyPassword:!1,signUpClicked:!1},e.handleChange=function(t){e.setState(Object(v.a)({},t.target.id,t.target.value))},e.verifyPassword=function(t){t.target.value===e.state.password&&e.setState(Object(C.a)(Object(C.a)({},e.state),{},{verifyPassword:!0}))},e.handleSubmit=function(t){if(t.preventDefault(),!e.state.verifyPassword)return alert("confirmation du password incorrecte"),null;e.setState(Object(C.a)(Object(C.a)({},e.state),{},{signUpClicked:!0})),e.props.signUp(e.state)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.signupError;return r.a.createElement("div",{className:re.a.content},r.a.createElement("form",{className:re.a.formUp,onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"text-center"},r.a.createElement("strong",null,"Create")," an account"),r.a.createElement("div",{className:"form-group input-group"},r.a.createElement("input",{id:"fullName",className:"form-control ".concat(re.a.formControl),placeholder:"Full name",type:"text",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group input-group"},r.a.createElement("input",{id:"email",className:"form-control ".concat(re.a.formControl),placeholder:"Email",type:"email",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group input-group"},r.a.createElement("input",{className:"form-control ".concat(re.a.formControl),placeholder:"Password",type:"password",id:"password",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group input-group"},r.a.createElement("input",{className:"form-control ".concat(re.a.formControl),placeholder:"Password (repeat)",type:"password",onChange:this.verifyPassword,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block ".concat(re.a.btnPrimary)},"Sign Up"),r.a.createElement("div",{className:re.a.error},this.state.signUpClicked&&e?r.a.createElement("p",null,e):null))))}}]),a}(n.Component),ie=Object(p.b)((function(e){return{auth:e.firebase.auth,signupError:e.auth.signupError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=(0,n.getFirebase)(),o=r.firestore();r.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return o.collection("professeur").doc(t.user.uid).set({fullName:e.fullName}).then((function(){r.auth().signOut().then((function(){return window.location="/signin"}))}))})).catch((function(e){console.log("error"),t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(le),se=a(74),ue=a(251),me=a.n(ue);function de(e,t){var a=[];return new Promise((function(n){e.collection("tags").where("idProf","==",t).get().then((function(e){e.forEach((function(e){a.push({id:e.id,libelle:e.data().libelle})})),n(a)}))}))}function pe(e,t){var a=[];return new Promise((function(n){e.collection("chapitre").where("idCours","==",t).get().then((function(e){e.forEach((function(e){a.push(Object(C.a)({id:e.id},e.data()))})),n(a)}))}))}function fe(e,t,a){var n=[];return new Promise((function(r){e.collection("onglet").where("idCours","==",t).orderBy("idOnglet").get().then((function(e){e.forEach((function(e){n.push({idOnlget:e.data().idOnglet,ongletName:e.data().nomOnglet,chapters:a&&a.filter((function(t){return t.idOnglet===e.data().idOnglet}))})})),r(n)}))}))}var he=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("h5",{className:"card-header"},"D\xe9tail du cours"),r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#"},"Active")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#"},"Link")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#"},"Link")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link ",href:"#"},"Disabled")))))}}]),a}(n.Component),be=Object(j.d)(Object(A.firestoreConnect)([{collection:"onglet"},{collection:"chapitre"}]),Object(p.b)((function(e){return console.log(e),{cours:e.firestore.ordered.cours,auth:e.firebase.auth}})))(he),ge=Object(j.d)(Object(A.firestoreConnect)([{collection:"cours"}]),Object(p.b)((function(e){return{cours:e.firestore.ordered.cours,auth:e.firebase.auth}}),(function(e){return{generateFile:function(t){return e(function(e){return function(){var t=Object(P.a)(S.a.mark((function t(a,n,r){var o,c,l,i,s,u,m,d,p,f;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=o().firestore(),t.next=4,pe(c,e.id);case 4:return l=t.sent,t.next=7,fe(c,e.id,l);case 7:return i=t.sent,t.next=10,de(c,n().firebase.auth.uid);case 10:s=t.sent,u={name:e.nomCours,tags:s,onglets:i},m=document.createElement("a"),document.body.appendChild(m),m.style="display: none",d=JSON.stringify(u,null,2),p=new Blob([d],{type:"application/json"}),f=window.URL.createObjectURL(p),m.href=f,m.download="Data.json",m.click(),window.URL.revokeObjectURL(f);case 20:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))},deleteCours:function(t){return e(X(t))}}})))((function(e){var t=e.cours,a=e.auth,o=e.generateFile,c=Object(n.useState)(""),l=Object(se.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(se.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),h=Object(se.a)(f,2),b=h[0],g=h[1],E=Object(n.useState)(null),v=Object(se.a)(E,2),O=v[0],C=v[1],j=t&&t.filter((function(e){return e.idProf===a.uid})),y=j&&j.filter((function(e){return-1!==e.nomCours.indexOf(i)}));return r.a.createElement("div",{style:{padding:"40px"}},r.a.createElement("div",{className:"card"},r.a.createElement("h5",{className:"card-header text-center"},"Liste des cours"),r.a.createElement("div",{className:"card-body"},r.a.createElement("input",{type:"text",value:i,className:"form-control",placeholder:"search",onChange:function(e){return s(e.target.value.substr(0,20))}}),r.a.createElement("div",{className:"table-responsive-sm"},r.a.createElement("table",{className:"table table-hover table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Cours"),r.a.createElement("th",{scope:"col",className:"text-center"},"Nombre d'onglet"),r.a.createElement("th",{scope:"col",className:"text-center"},"Date de creation"),r.a.createElement("th",{scope:"col",className:"text-center"},"Info"),r.a.createElement("th",{scope:"col",className:"text-center"},"Action"))),r.a.createElement("tbody",null,y&&y.map((function(e){return r.a.createElement("tr",{key:e.id,id:e.id},r.a.createElement("th",{scope:"row"},e.nomCours),r.a.createElement("td",null,e.nbrOnglet),r.a.createElement("td",null,me()(e.date.toDate()).calendar()),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return p(!0)}},"Details")),r.a.createElement("td",{className:"d-flex justify-content-sm-around flex-wrap"},r.a.createElement("button",{className:"btn btn-outline-info btn-sm",onClick:function(){return o(e)}},r.a.createElement("i",{className:"fas fa-download","aria-hidden":"true"})),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){C(e),g(!0)}},r.a.createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}))))})))))),b?r.a.createElement(ee,{show:b,closeModal:function(){g(!1)},type:"cours",cours:O}):null,d?r.a.createElement(be,{cours:j}):null))})),Ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:K}),r.a.createElement(d.b,{path:"/signin",component:ce}),r.a.createElement(d.b,{path:"/signup",component:ie}),r.a.createElement(d.b,{path:"/listcours",component:ge}),r.a.createElement(d.b,{path:"/tags",component:ae}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve={cour:[{nom:"",nbrOnglet:"",idProf:"",date:""}],exist:null},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COURS":return Object(C.a)(Object(C.a)({},e),{},{exist:null});case"DELETE_COURS":return console.log("cours supprime avec succes"),Object(C.a)(Object(C.a)({},e),{},{exist:null});case"EXIST":return Object(C.a)(Object(C.a)({},e),{},{exist:t.msg});case"Error":return Object(C.a)(Object(C.a)({},e),{},{exist:null});default:return e}},Ce={signinError:null,signupError:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(C.a)(Object(C.a)({},e),{},{signinError:null,signupError:null});case"LOGIN_ERROR":return Object(C.a)(Object(C.a)({},e),{},{signinError:t.err.message,signupError:null});case"SIGNOUT_SUCCESS":return console.log("sign out success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(C.a)(Object(C.a)({},e),{},{signinError:null,signupError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(C.a)(Object(C.a)({},e),{},{signupError:t.err.message,signinError:null});default:return e}},ye={chapitre:[{titre:"",contenu:"",volumeHoraire:"",niveau:"",tags:[],idOnget:"",idCours:""}]},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CHAP":console.log("chapitre ajoute",t.chap)}return e},we={onglet:[{idOnglet:"",nom:"",idCours:""}]},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ONGLET":break;case"Error":console.log(t.err)}return e},ke={tag:[{libelle:""}]},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAG":console.log("tag Ajoute");break;case"DELETE_TAG":console.log("tag supprime");break;case"ERROR ":console.log(t.err)}return e},Se={file:{name:"",tags:[],onglets:[]}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;return t.type,e},De=a(104),Ae=Object(j.c)({auth:je,cours:Oe,chap:Ne,onglet:_e,tag:xe,file:Pe,firebase:A.firebaseReducer,firestore:De.firestoreReducer}),Re=a(252),Te=a(107),Ie=a.n(Te);a(458),a(461);Ie.a.initializeApp({apiKey:"AIzaSyA9CqvCUEyXfgDwK0WIBtMZBzMDhCGEu6Q",authDomain:"backoffice-35933.firebaseapp.com",databaseURL:"https://backoffice-35933.firebaseio.com",projectId:"backoffice-35933",storageBucket:"backoffice-35933.appspot.com",messagingSenderId:"866403545931",appId:"1:866403545931:web:a3437a72e571f1f40aeece",measurementId:"G-94WX6VTNVL"}),Ie.a.firestore();var Me=Ie.a,Fe=Object(j.e)(Ae,Object(j.d)(Object(j.a)(Re.a.withExtraArgument({getFirebase:A.getFirebase})))),Ue={firebase:Me,config:{userProfile:"professeur",useFirestoreForProfile:!0},dispatch:Fe.dispatch,createFirestoreInstance:De.createFirestoreInstance};function Be(e){var t=e.children,a=Object(p.c)((function(e){return e.firebase.auth}));return Object(A.isLoaded)(a)?t:r.a.createElement("div",{className:"loader"})}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:Fe},r.a.createElement(A.ReactReduxFirebaseProvider,Ue,r.a.createElement(Be,null,r.a.createElement(Ee,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports={"modal-90w":"modal_modal-90w__5edCL",editor:"modal_editor__k5Del",tgs:"modal_tgs__1JKhR","ck-editor__editable_inline":"modal_ck-editor__editable_inline__3vaZQ"}}},[[253,1,2]]]);
//# sourceMappingURL=main.7e40eae5.chunk.js.map